<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>TOMCAT CALCULATOR</title>
</head>
<body>
    <div>
        <p th:text="'HELLO ' + ${name}"></p>
    </div>
    <div>
        <input id="input" maxlength="30">
        <button onclick=calculateBrowser()>Calculate in browser!</button>
        <button onclick=calculateServer()>Calculate on Server!</button>
    </div>
    <div>
        <textarea id="output" cols="40"></textarea>
    </div>
</body>

<script>
    function calculateBrowser() {
        let inputString = document.getElementById("input").value;
        let result = eval(inputString);
        document.getElementById("output").innerHTML = result;
    }

    function calculateServer() {
        const xhr = new XMLHttpRequest();
        const body = String(document.getElementById("input").value);
        const path = "/localhost:8085/";
        xhr.open("POST", path);
        xhr.setRequestHeader('Content-Type', 'application/text');
        xhr.send(body);

        xhr.onload = () => {
            const result = xhr.responseText;
            document.getElementById("output").innerHTML = result;
        }
    }

</script>
</html>